<!-- components/table/crud_table.html -->
<!-- 汎用CRUDテーブルコンポーネント -->

<!-- ヘッダー部分 -->
<div class="d-flex justify-content-between align-items-center mb-4">
  <h1 class="h3 mb-0">{{ config.title }}</h1>
  <div class="d-flex gap-2">
      <!-- 検索フォーム -->
      {% if config.search %}
      <form class="d-flex">
          <div class="input-group">
              <input type="text" 
                     class="form-control" 
                     name="search" 
                     placeholder="{{ config.search_placeholder|default:'検索...' }}" 
                     value="{{ search_query }}">
              <button class="btn btn-outline-secondary" type="button">
                  <i class="fas fa-search"></i>
              </button>
          </div>
      </form>
      {% endif %}
      
      <!-- 新規追加ボタン -->
      {% if config.actions.create_url %}
      <button class="btn btn-primary" 
              data-bs-toggle="modal" 
              data-bs-target="#crudFormModal">
          <i class="fas fa-plus"></i> {{ config.create_button_text|default:'新規追加' }}
      </button>
      {% endif %}
  </div>
</div>

<!-- テーブルコンテナ -->
<div class="card">
  <div class="card-body">
      <div id="{{ config.table_container_id|default:'tableContainer' }}">
          {% include 'components/table/table_with_pagination.html' %}
      </div>
  </div>
</div>

<!-- JavaScript初期化 -->
<script>
window.crudTableConfig = {
  tableContainerId: '{{ config.table_container_id|default:"tableContainer" }}',
  createUrl: '{% url config.actions.create_url %}',
  editUrl: '{{ config.actions.edit_url }}',
  deleteUrl: '{{ config.actions.delete_url }}',
  searchUrl: '{% url config.actions.search_url|default:config.actions.create_url %}',
  entityName: '{{ config.entity_name|default:"項目" }}',
  csrfToken: '{{ csrf_token }}'
};
</script>